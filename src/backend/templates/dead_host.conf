# {{ domain_names | join: ", " }}
server {
  listen 80;
  {%- if ssl_enabled == 1 or ssl_enabled == true -%}
  listen 443 ssl;
  {%- endif %}
  server_name {{ domain_names | join: " " }};
  access_log /data/logs/proxy_host-{{ id }}.log proxy;

  {%- if ssl_enabled == 1 or ssl_enabled == true -%}
  {%- if ssl_provider == "letsencrypt" %}
  # Let's Encrypt SSL
  include conf.d/include/letsencrypt-acme-challenge.conf;
  include conf.d/include/ssl-ciphers.conf;
  ssl_certificate /etc/letsencrypt/live/proxy_host-{{ id }}/fullchain.pem;
  ssl_certificate_key /etc/letsencrypt/live/proxy_host-{{ id }}/privkey.pem;
  {%- endif -%}
  {%- endif %}

  # TODO: Advanced config options

  return 404;
}
